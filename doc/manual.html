<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>DELORES User's Manual</title>
  </head>

  <body>
    <h1>DELORES User's Manual</h1>

<h3>Contents</h3>
<dl>
<dd><a href=#introduction>Introduction</a>
<dd><a href=#invoking>Invoking the interpreter</a>
   <dl>
   <dd><a href=#commandline>Command-line interface</a>
   <dd><a href=#cgi>CGI interface</a>
   </dl>
<dd><a href=#morphology>Language morphology</a>
<dd><a href=#syntax>Language syntax</a>
   <dl>
   <dd><a href=#metasyntax>Metasyntax</a>
   <dd><a href=#basictokens>Basic tokens</a>
   <dd><a href=#theoryconstructs>Theory constructs</a>
   <dd><a href=#directives>Interpreter directives</a>
   </dl>
<dd><a href=#semantics>Language semantics</a>
   <dl>
   <dd><a href=#theorysemantics>Theory constructs</a>
   <dd><a href=#directivesemantics>Interpreter directives</a>
   </dl>
<dd><a href=#errors>Errors &amp; warnings</a>
   <dl>
   <dd><a href=#syntaxerrors>Syntax errors</a>
   <dd><a href=#fatalerrors>Fatal errors</a>
   <dd><a href=#warnings>Warnings</a>
   </dl>
<dd><a href=#bugs>Known issues</a>
<dd><a href=#credits>Credits</a>
</dl>

<a name=introduction></a><h3>Introduction</h3>

<p>DELORES is a defeasible logic interpreter which works in interactive and batch modes.</p>

<a name=invoking></a><h3>Invoking the interpreter</h3>

<a name=commandline></a><h4>Command-line interface</h4>

<p>From the command line, DELORES is started by typing:</p>

<blockquote><tt>dl [--help] [-v] [-q] [-a <i>n</i>] [-A <i>n</i>] [-r <i>n</i>] [-R <i>n</i>] [-m <i>n</i>] [<i>filename</i>]</tt></blockquote>

<p>where the arguments have the following meanings:</p>

<table>
<tr><td valign=top><tt>--help</tt></td><td valign=top>Print a brief list of command-line arguments and then quit.</td></tr>
<tr><td valign=top><tt>-v</tt></td><td valign=top>Print out version and copyright information and then quit.</td></tr>
<tr><td valign=top><tt>-q</tt></td><td valign=top>Quiet mode.  Nonessential messages are suppressed; this option would be used when invoking DELORES from a shell script or GUI interface to make its output easier to parse.  Quiet mode is not enabled by default.</td></tr>
<tr><td valign=top><tt>-a <i>n</i></tt></td><td valign=top>Make the atom hash table size the smallest prime greater than or equal to <tt><i>n</i></tt>.</td></tr>
<tr><td valign=top><tt>-A <i>n</i></tt></td><td valign=top>Make the atom hash table size exactly <tt><i>n</i></tt>. Basic hash table theory suggests that <tt><i>n</i></tt> should be a prime number, or at least not divisible by a small prime; for this reason, it is recommended that the <tt>-a</tt> option be used if <tt><i>n</i></tt> is not known for certain to be prime.  In absence of both the <tt>-A</tt> and <tt>-a</tt> options, the table size defaults to 100&nbsp;003.</td></tr>
<tr><td valign=top><tt>-r <i>n</i></tt></td><td valign=top>Make the rule hash table size the smallest prime greater than or equal to <tt><i>n</i></tt>.</td></tr>
<tr><td valign=top><tt>-R <i>n</i></tt></td><td valign=top>Make the rule hash table size exactly <tt><i>n</i></tt>. Basic hash table theory suggests that <tt><i>n</i></tt> should be a prime number, or at least not divisible by a small prime; for this reason, it is recommended that the <tt>-r</tt> option be used if <tt><i>n</i></tt> is not known for certain to be prime.  In absence of both the <tt>-R</tt> and <tt>-r</tt> options, the table size defaults to 100&nbsp;003.</td></tr>
<tr><td valign=top><tt>-m <i>n</i></tt></td><td valign=top>Pre-allocate memory in <tt><i>n</i></tt>-byte chunks.  It is strongly recommended that <tt><i>n</i></tt> be a power of 2.  This option is available only if DELORES is compiled with the BGET memory allocator.  In absence of the <tt>-m</tt> option, the chunk size defaults to 65&nbsp;536 bytes.</td></tr>
<tr><td valign=top><tt><i>filename</i></tt></td><td valign=top>Process the theory contained in the named file and then quit.</td></tr>
</table>

<p>Obviously, some command-line arguments may not be used in conjunction with certain others; in the event of contradictory arguments, DELORES will use the first.  It should also be noted that the ranges of acceptable values for options taking integer arguments is system-dependant. While DELORES makes every effort to report argument values which are too large, there remains a small chance that overflow errors will go undetected.  For this reason, DELORES prints the atom hash table size, rule hash table size, and, if applicable, memory chunk size at startup (in non-quiet mode). If the numbers do not correspond to the values specified on the command line, try invoking DELORES again with smaller argument values.</p>

<a name=cgi></a><h4>CGI interface</h4>

<p>The CGI interface is still under development; at present it is not state-persistent.  To access the interface, point your web browser at <a href="http://www.cit.gu.edu.au/~xerxes/cgi-bin/dl_cgi.cgi">http://www.cit.gu.edu.au/~xerxes/cgi-bin/dl_cgi.cgi</a> and enter your defeasible logic theory in the form provided.  Upon using the <i>Submit</i> button, DELORES will be invoked and its output will come up in a new web page.</p>

<a name=morphology></a><h3>Language morphology</h3>

<p>A <i>name</i> is any sequence of one or more digits, letters, and underscores which begins with a lowercase letter.  A <i>label</i> is any sequence of one or more digits, letters, underscores, and forward slashes which begins with a letter or a slash.  A <i>filename</i> is any sequence of one or more characters except newlines.  In terms of Unix-style regular expressions, these three basic patterns can be represented as follows:</p>

<blockquote>
<tt><i>name</i> ::= [a-z][A-Za-z0-9_]*</tt><br><br>
<tt><i>label</i> ::= [A-Za-z/][A-Za-z0-9_/]*</tt><br><br>
<tt><i>filename</i> ::= .+</tt><br><br>
</blockquote>

<p><i>Note:</i> Users may not define rules with labels containing the "/" character; this character is reserved for rules named by the interpreter.</i>

<a name=syntax></a><h3>Language syntax</h3>

<a name=metasyntax></a><h4>Metasyntax</h4>

<p>The following BNF-like notational conventions are used for expressing DELORES syntax:</p>

<blockquote>
<tt>[pattern]&nbsp;&nbsp;&nbsp;</tt> optional<br>
<tt>(pattern)&nbsp;&nbsp;&nbsp;</tt> grouping<br>
<tt>pat1 | pat2&nbsp;</tt> choice of either pat1 or pat2<br>
<tt>"literal"&nbsp;&nbsp;&nbsp;</tt> interpret quoted text literally
</blockquote>

<p>It should be noted that all white space (tabs, spaces, and newlines) between tokens is ignored.  Thus, white space may be omitted when the omission does not lead to ambiguity.</i></p>

<a name=basictokens></a><h4>Basic tokens</h4>
<blockquote>
<tt><i>NOT</i> ::= "neg" | "not"</tt><br><br>
<tt><i>SARROW</i> ::= ":-" | "&lt;-"</tt><br><br>
<tt><i>DARROW</i> ::= ":=" | "&lt;="</tt><br><br>
<tt><i>DEFARROW</i> ::= ":^" | "&lt;~"</tt><br><br>
<tt><i>DL_TRUE</i> ::= "true"</tt><br><br>
<tt><i>DL_FALSE</i> ::= "false"</tt><br><br>
</blockquote>

<a name=theoryconstructs></a><h4>Theory constructs</h4>
<blockquote>
<tt><i>program</i> ::= [ <i>program</i> ] <i>statement</i> "."</tt><br><br>
<tt><i>statement</i> ::= <i>rule</i> | <i>fact</i> | <i>suprel</i> | <i>directive</i></tt><br><br>
<tt><i>suprel</i> ::= <i>label</i> ( "&lt;" | "&gt;" ) <i>label</i></tt><br><br>
<tt><i>atom</i> ::= <i>name</i> [ "(" <i>termlist</i> ")" ]</tt><br><br>
<tt><i>term</i> ::= <i>variable</i> | <i>name</i> [ "(" <i>termlist</i> ")" ]</tt><br><br>
<tt><i>termlist</i> ::= [ <i>termlist</i> "," ] <i>term</i></tt><br><br>
<tt><i>lliteral</i> ::= [ <i>NOT</i> ] <i>atom</i></tt><br><br>
<tt><i>literal</i> ::= [ "faild" | "failD" ] ( <i>lliteral</i> | [ <i>NOT</i> ] ( <i>DL_TRUE</i> | <i>DL_FALSE</i> ) )</tt><br><br>
<tt><i>fact</i> ::= [ "unknown" ] <i>lliteral</i></tt><br><br>
<tt><i>rule</i> ::= <i>srule</i> | <i>drule</i> | <i>defeater</i></tt><br><br>
<tt><i>litlist</i> ::= [ <i>litlist</i> "," ] <i>literal</i></tt><br><br>
<tt><i>srule</i> ::= [ <i>label</i> ":" ] <i>lliteral SARROW litlist</i></tt><br><br>
<tt><i>drule</i> ::= [ <i>label</i> ":" ] <i>lliteral DARROW litlist</i></tt><br><br>
<tt><i>defeater</i> ::= [ <i>label</i> ":" ] <i>lliteral DEFARROW litlist</i></tt>
</blockquote>

<a name=directives></a><h4>Interpreter directives</h4>

<p>Interpreter directives are special commands issued to the interpreter which do not, strictly speaking, form part of the user's theory.  They are used for reading and printing theories, executing the inference engine, and terminating the interpreter.  Interpreter directives are considered <i>statement</i>s for the purposes of the language grammar.</p>

<blockquote>
<tt><i>directive</i> ::= <i>listing</i> | <i>print</i> | <i>infer</i> | <i>inferwf</i> | <i>end</i> | <i>include</i></tt><br><br>
<tt><i>listing</i> ::= "listing" [ "(" <i>label</i> ")" ]</tt><br><br>
<tt><i>print</i> ::= "print" "(" <i>atom</i> ")"</tt><br><br>
<tt><i>infer</i> ::= "infer"</tt><br><br>
<tt><i>inferwf</i> ::= "inferwf"</tt><br><br>
<tt><i>end</i> ::= "end"</tt><br><br>
<tt><i>include</i> ::= "include" "(" <i>filename</i> ")"</tt><br><br>
</blockquote>

<a name=semantics></a><h3>Language semantics</h3>

<a name=theorysemantics></a><h4>Theory constructs</h4>

<p>[<i>Under construction &#151; See papers by Michael Maher et al.</i>]</p>

<a name=directivesemantics></a><h4>Interpreter directives</h4>
<table>
<tr><td valign=top><tt>include</tt></td><td valign=top>The <tt>include</tt> directive is used to read and interpret a theory file on disk.  The specified file will be read from disk as if it were entered via standard input.  The maximum nesting depth for <tt>include</tt> is sixteen files; this limit prevents infinite loops from two or more files which <tt>include</tt> each other.</td></tr>
<tr><td valign=top><tt>listing</tt></td><td valign=top>When called without arguments, the <tt>listing</tt> directive prints a list of all rules in the theory, in the order they were initially created.  If the user supplies a rule label as an argument, only that rule is printed (if it exists).</td></tr>
<tr><td valign=top><tt>print</tt></td><td valign=top>This directive takes an atom's name as its argument.  Information about that atom, if it exists, is then printed.</td></tr>
<tr><td valign=top><tt>infer</tt></td><td valign=top>This directive executes the defeasible logic inference engine.  Timing information is printed upon completion.</td></tr>
<tr><td valign=top><tt>inferwf</tt></td><td valign=top>The <tt>inferwf</tt> directive is similar to <tt>infer</tt>, except that the well-founded defeasible logic inference engine is used.</td></tr>
<tr><td valign=top><tt>end</tt></td><td valign=top>The <tt>end</tt> directive indicates that the interpretation is over.  No further statements are read.  This directive is optional at the end of a file, as the interpretation will simply end when there is no further data in standard input.</td></tr>
</table>

<a name=errors></a><h3>Errors &amp; warnings</h3>

<a name=syntaxerrors></a><h4>Syntax errors</h4>

<p>Syntax errors are detected during reading.  Each statement that fails to comply with syntax requirements causes DELORES to print a "parse error" message listing the filename, line number, and if possible, the exact token at which the error occurred.  The interpretation will then continue as if the erroneous statement were never entered.  In batch mode (that is, when DELORES is processing a theory file given on the command line or with an <tt>include</tt> directive), DELORES will print out the first sixteen syntax errors before aborting the interpretation.  In interactive mode, a syntax error will never cause the interpretation to abort, as it is assumed that the user will correct the error upon reading the error message.</p>

<a name=fatalerrors></a><h4>Fatal errors</h4>

<p>Fatal errors include system errors such as running out of memory or attempting to open a theory file (via <tt>include</tt> or a command-line argument) that does not exist or cannot be opened, and other exceptional cases such as exceeding the <tt>include</tt> nesting depth.  As the name implies, fatal errors result in immediate termination of the interpreter.  As with syntax errors, DELORES will attempt to identify the exact point in input at which the error occurred. The list of the most common fatal errors is as follows:</p>

<blockquote><b>out of memory!</b><br>
<b>atom table too big for available memory!</b><br>
<b>rule table too big for available memory!</b><br>
<b>cannot insert into rule table</b><br>
<b>cannot insert into atom table</b><br>
There is not sufficient memory for the interpretation to continue.  Try using the command-line arguments to decrease the size of the hash tables and/or the memory chunk size (if applicable).  Failing that, if DELORES has been compiled with the BGET memory allocator, try recompiling it with the BGET <tt>BestFit</tt> macro set, or even without BGET support at all.  The resulting interpreter may be slower, but it will probably use less memory.  If recompiling is not an option or does not solve the problem, consult your operating system's documentation for hints on increasing the amount of memory available to DELORES.</blockquote>

<blockquote><b>too many nested includes</b><br>
The <tt>include</tt> directive has a maximum nesting depth of 16.  It is unlikely that files would ever be nested to this depth in practice; if this error occurs it is most likely that an infinite loop has arisen from a particular file <tt>include</tt>ing itself indirectly.</blockquote>

<blockquote><b>no such file or directory</b><br>
The user has instructed the interpreter to read in a file which either does not exist, or is otherwise unopenable.  Check that the path, filename, and file permissions are correct.</blockquote>

<p>There are other fatal errors which DELORES may produce in the extremely unlikely event that certain system limits are exceeded, or if the interpreter encounters some completely unexpected error condition. In these cases, please contact the program's maintainer with the exact error message given, as well as instructions on how to reproduce the error.</p>

<a name=warnings></a><h4>Warnings</h4>

<p>Warning messages indicate an anomaly that may be of interest to the user, though it is unlikely interfere with the interpretation.  The warnings are as follows:</p>

<blockquote><b>warning: ignoring redefinition of <i>rule</i></b><br>
The same label has been used to define two separate rules.  The second rule is ignored; if it is to be entered into the theory, then its label should be changed or omitted.</blockquote>

<blockquote><b>warning: rule count overflow</b><br>
DELORES assigns every rule an identifying number so that the <tt>listing</tt> directive prints out the rules in the order they were entered.  This message indicates that DELORES has run out of unique numbers for the rules; consequently, <tt>listing</tt> can no longer be guaranteed to print rules in the proper order.</blockquote>

<blockquote><b>warning: same rule appears on both sides of of superiority relation</b><br>
This message is printed when a superiority relation such as <tt>rule &gt; rule</tt> is entered.  Such a declaration makes no sense semantically.</blockquote>

<a name=bugs></a><h3>Known issues</h3>

<p>The only known bug in the interpreter has to do with its processing of <tt>include</tt> directives; sometimes the filename is not properly recognized.  To avoid any potential problems, users are cautioned to place their <tt>include</tt> directives on lines separate from any other statements.</p>

<a name=credits></a><h3>Credits</h3>

<p>This document was written by Tristan Miller, and is
Copyright &copy; 2000 Michael Maher.</p>

<p>The DELORES program was written by Tristan Miller,
and is Copyright &copy; 1999, 2000 Michael Maher.</p>

<p>The DELORES Web Interface uses CGIC, a CGI library by Thomas Boutell:</p>

<blockquote><i>
CGIC, copyright 1996, 1997, 1998, 1999 by Thomas Boutell and
Boutell.Com, Inc.. Permission is granted to use CGIC in any 
application, commercial or noncommercial, at no cost. HOWEVER,
this copyright paragraph must appear on a "credits" page accessible 
in the public online and offline documentation of the program. 
Modified versions of the CGIC library should not be distributed without 
the attachment of a clear statement regarding the author of the 
modifications, and this notice may in no case be removed. 
Modifications may also be submitted to the author for inclusion 
in the main CGIC distribution.                                 
</i></blockquote>

<p>DELORES uses BGET,
a public domain memory allocator by John Walker.</p>

<p>DELORES uses OHASH,
a public domain hash table library by Tristan Miller.</p>


    <hr>
    <address><a href="mailto:psychonaut@nothingisreal.com">Tristan Miller</a></address>
<!-- Created: Fri Jan  7 19:01:55 EST 2000 -->
<!-- hhmts start -->
Last modified: Thu Jan 13 07:35:33 EST 2000
<!-- hhmts end -->
  </body>
</html>
